---
sidebarSortOrder: 1
sidebarLabel: Модель учетной записи Solana
title: Модель учетной записи Solana
altRoutes:
  - /docs/core
---

В Solana все данные хранятся в так называемых «учетных записях». 
Способ организации данных в Solana напоминает 
[хранилище значений ключей](https://en.wikipedia.org/wiki/Key%E2%80). %93value_database), 
где каждая запись в базе данных называется «учетной записью».

![Accounts](/assets/docs/core/accounts/accounts.svg)

## Ключевые моменты

- Учетные записи могут хранить до 10 МБ данных, которые могут состоять 
  из исполняемого программного кода или состояния программы.

- Для учетных записей требуется внести залог за аренду в SOL, 
  пропорциональный объему хранящихся данных, который полностью возвращается 
  при закрытии учетной записи.

- У каждого аккаунта есть программный «владелец». Только программа, 
  владеющая учетной записью, может изменять ее данные или списывать баланс лампы. 
  Однако увеличить баланс может любой желающий.

— Программы (смарт-контракты) — это учетные записи без сохранения состояния, 
  в которых хранится исполняемый код.

- Учетные записи данных создаются программами для хранения и управления 
  состоянием программы.

- Собственные программы — это встроенные программы, включенные в среду выполнения 
  Solana.

— Учетные записи Sysvar — это специальные учетные записи, в которых хранится 
  состояние сетевого кластера.

## Счет

Каждая учетная запись идентифицируется по ее уникальному адресу, 
представленному в виде 32 байтов в формате 
[Ed25519](https://ed25519.cr.yp.to/) `PublicKey`. 
Вы можете рассматривать адрес как уникальный идентификатор учетной записи.

![Account Address](/assets/docs/core/accounts/account-address.svg)

Эту связь между учетной записью и ее адресом можно рассматривать 
как пару ключ-значение, где адрес служит ключом для поиска 
соответствующих данных учетной записи в цепочке.

### Информация об аккаунте

Учетные записи имеют 
[максимальный размер 10 МБ](https://github.com/solana-labs/solana/blob/27eff8408b7223bb3c4ab70523f8a8dca3ca6645/sdk/program/src/system_instruction.rs#L85) 
(10 Мегабайт), а данные хранящиеся в каждой учетной записи на Solana 
имеют следующую структуру, известную как 
[AccountInfo](https://github.com/solana-labs/solana/blob/27eff8408b7223bb3c4ab70523f8a8dca3ca6645/sdk/program/src/account_info.rs#L19).

![AccountInfo](/assets/docs/core/accounts/accountinfo.svg)

`AccountInfo` для каждой учетной записи включает следующие поля:

- `data`: массив байтов, в котором хранится состояние учетной записи. 
  Если учетная запись является программой (смарт-контрактом), 
  то здесь хранится исполняемый программный код. 
  Это поле часто называют `account data` («данными учетной записи»).
- `executable`: логический флаг, указывающий, является ли учетная запись программой.
- `lamports`: числовое представление баланса счета в
 [лампортах](/docs/terminology.md#lamport), наименьшая единица СОЛ 
 (1 SOL = 1 миллиард lamports = 10^9 lamports).
- `owner`: указывает открытый ключ (идентификатор программы) программы, 
  которой принадлежит учетная запись.

Ключевой частью модели учетной записи Solana является то, что 
каждая учетная запись на Solana имеет назначенного «владельца», а именно программу. 
Только программа, назначенная владельцем учетной записи, может изменять данные, 
хранящиеся в учетной записи, или списывать баланс лампы. Важно отметить, 
что хотя списать баланс может только владелец, увеличить баланс может любой желающий.

> Для хранения данных в сети необходимо
> перевести определенное количество SOL на учетную запись. 
> Переведенная сумма пропорциональна размеру данных, хранящихся на счете. 
> Это понятие обычно называют «рентой». Однако вы можете думать об «арендной плате» 
> скорее как о «депозите», поскольку SOL, выделенный на учетную запись, 
> может быть полностью возвращен после закрытия учетной записи.

## Нативные программы

Solana содержит небольшое количество собственных программ, которые являются частью
реализацию валидатора и предоставление различных основных функций сети. 
Полный список собственных программ можно найти 
[здесь](https://docs.solanalabs.com/runtime/programs).

При разработке пользовательских программ в Solana вы обычно будете взаимодействовать 
с двумя собственными программами: системной программой и загрузчиком BPF.

### Системная программа

По умолчанию все новые учетные записи принадлежат 
[Системной программе](https://github.com/solana-labs/solana/tree/27eff8408b7223bb3c4ab70523f8a8dca3ca6645/programs/system/src). 
Системная программа выполняет несколько ключевых задач, таких как:

- [Создание новой учетной записи](https://github.com/solana-labs/solana/blob/27eff8408b7223bb3c4ab70523f8a8dca3ca6645/programs/system/src/system_processor.rs#L145): 
  только системная программа может создавать новые учетные записи.
- [Распределение пространства](https://github.com/solana-labs/solana/blob/27eff8408b7223bb3c4ab70523f8a8dca3ca6645/programs/system/src/system_processor.rs#L70): 
  устанавливает емкость байтов для поля данных каждой учетной записи.
- [Назначить владельца программы](https://github.com/solana-labs/solana/blob/27eff8408b7223bb3c4ab70523f8a8dca3ca6645/programs/system/src/system_processor.rs#L112): 
  как только системная программа создаст учетную запись, она сможет 
  переназначить назначенного владельца программы в другую 
  учетную запись программы. Таким образом пользовательские программы 
  становятся владельцами новых учетных записей, созданных 
  системной программой.

В Solana «кошелек» — это просто учетная запись, принадлежащая системной программе. 
Лампортовый баланс кошелька — это количество SOL, принадлежащее учетной записи.

![Системная учетная запись](/assets/docs/core/accounts/system-account.svg)

> В качестве плательщиков комиссии за транзакцию могут использоваться только счета, 
> принадлежащие Системной программе.

### Программа BPFLoader

[Загрузчик BPF](https://github.com/solana-labs/solana/tree/27eff8408b7223bb3c4ab70523f8a8dca3ca6645/programs/bpf_loader/src) 
— это программа, назначенная «владельцем» всех других программ в сети, 
за исключением собственных программ. Он отвечает за развертывание, 
обновление и выполнение пользовательских программ.

## Сисвар-аккаунты

Учетные записи Sysvar — это специальные учетные записи, расположенные по 
заранее определенным адресам, которые обеспечивают доступ к данным 
о состоянии кластера. Эти учетные записи динамически обновляются данными 
о сетевом кластере. Полный список учетных записей Sysvar можно найти 
[здесь](https://docs.solanalabs.com/runtime/sysvars).

## Пользовательские программы

В Solana «умные контракты» называются [программами](/docs/core/programs.md). 
Программа — это учетная запись, которая содержит исполняемый код и 
обозначается флагом `executable` («исполняемый»), для которого установлено 
значение true.

Более подробное объяснение процесса развертывания программы можно найти 
на странице [Развертывание программ](/docs/programs/deploying.md) 
данной документации.

### Программный аккаунт

Когда новые программы 
[развертываются](https://github.com/solana-labs/solana/blob/27eff8408b7223bb3c4ab70523f8a8dca3ca6645/programs/bpf_loader/src/lib.rs#L498) 
на Solana, технически создаются три отдельные учетные записи:

- **Program Account**: основная учетная запись, представляющая программу в сети. 
  В этой учетной записи хранится адрес учетной записи исполняемых данных 
  (в которой хранится скомпилированный программный код) и полномочия 
  обновления программы (адрес, уполномоченный вносить изменения в программу).
- **Program Executable Data Account**: учетная запись, содержащая 
  исполняемый байт-код программы.
- **Buffer Account**: временная учетная запись, в которой хранится байт-код 
  во время активного развертывания или обновления программы. 
  После завершения процесса данные передаются в учетную запись 
  исполняемых данных программы, а учетная запись буфера закрывается.

Например, вот ссылки на Solana Explorer для расширений токенов 
[Учетная запись программы] (https://explorer.solana.com/address/TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb)
и соответствующую ему 
[Учетную запись исполняемых данных программы](https://explorer.solana.com/address/DoU57AYuPFu2QU514RktNPG22QhApEjnKxnBcu4BHDTY).

![Program and Executable Data Accounts](/assets/docs/core/accounts/program-account-expanded.svg)

Для простоты вы можете думать об «Program Account» как о самой программе.

![Program Account](/assets/docs/core/accounts/program-account-simple.svg)

> Адрес «Program Account» обычно называют «Program ID», 
> который используется для запуска программы.

### Data Account - Данные учетной записи

Программы Solana не имеют состояния, что означает, что учетные записи 
программ содержат только исполняемый байт-код программы. 
Для хранения и изменения дополнительных данных необходимо создавать 
новые учетные записи. Эти учетные записи обычно называются "Data Account" 
(«учетными записями данных»).

Data Account (Учетные записи данных) могут хранить любые произвольные данные, 
определенные в коде программы-владельца.

![Data Account](/assets/docs/core/accounts/data-account.svg)

Обратите внимание, что только [Системная программа](/docs/core/accounts.md#system-program) 
может создавать новые учетные записи. Как только системная программа создаст учетную запись, 
она может передать право собственности на новую учетную запись другой программе.

Другими словами, создание учетной записи данных для пользовательской программы 
требует двух шагов:

1. Вызовите системную программу, чтобы создать учетную запись, 
   которая затем передает право собственности пользовательской программе.
2. Вызовите специальную программу, которая теперь владеет учетной записью, 
  чтобы затем инициализировать данные учетной записи, как определено в программном коде.

Этот процесс создания учетной записи данных часто рассматривается как один шаг, 
но полезно понять основной процесс.